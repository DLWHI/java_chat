CREATE TABLE IF NOT EXISTS users (
    id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    username VARCHAR(255) NOT NULL UNIQUE,
    password VARCHAR(255) NOT NULL
);

CREATE TABLE IF NOT EXISTS rooms (
    id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    name VARCHAR(255) NOT NULL,
    owner BIGINT FOREIGN KEY REFERENCES users(id) ON DELETE SET NULL
);

CREATE TABLE IF NOT EXISTS messages (
    id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    text VARCHAR(255) NOT NULL,
    author BIGINT FOREIGN KEY REFERENCES users(id) ON DELETE SET NULL,
    room BIGINT NOT NULL FOREIGN KEY REFERENCES rooms(id) ON DELETE CASCADE,
);
